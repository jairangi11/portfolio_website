<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>High Fidelity - Lambda Test Tab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Menlo:wght@400&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f8fc;
            color: #1a202c;
        }
        .modern-header {
            background-color: #ffffff;
            border-bottom: 1px solid #e2e8f0;
            color: #2d3748;
        }
        .modern-sidebar {
            background-color: #ffffff;
            border-right: 1px solid #e2e8f0;
            width: 64px;
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
        }
        .sidebar-icon {
            color: #718096;
            transition: all 0.2s ease-in-out;
        }
        .sidebar-icon:hover {
            color: #2c5282;
            transform: scale(1.1);
        }
         .modern-tab {
            padding: 0.75rem 1.25rem;
            margin-bottom: -1px;
            border-bottom: 2px solid transparent;
            color: #718096;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            text-decoration: none;
            display: inline-block;
        }
         .modern-tab:hover {
             color: #2d3748;
             border-bottom-color: #cbd5e0;
        }
        .modern-tab.active {
            color: #2c5282;
            border-bottom-color: #2c5282;
            font-weight: 600;
        }
        .modern-card {
            background-color: #ffffff;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
             transition: box-shadow 0.3s ease;
        }
        .modern-card:hover {
             box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04);
        }
        /* shadcn input */
        .modern-input {
             display: flex;
             height: 40px;
             width: 100%;
             border-radius: 6px;
             border: 1px solid #cbd5e0;
             background-color: #ffffff;
             padding: 0.5rem 0.75rem;
             font-size: 0.875rem;
             transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .modern-input:focus {
            outline: none;
            border-color: #2c5282;
            box-shadow: 0 0 0 2px rgba(44, 82, 130, 0.2);
        }
         /* shadcn label */
        .modern-label {
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            display: block;
            color: #4a5568;
        }
         /* shadcn select */
        .modern-select-wrapper {
             position: relative;
             display: block;
             width: 100%;
        }
        .modern-select {
             display: flex;
             align-items: center;
             justify-content: space-between;
             border-radius: 6px;
             border: 1px solid #cbd5e0;
             background-color: #ffffff;
             padding: 0.5rem 0.75rem;
             padding-right: 2.5rem;
             font-size: 0.875rem;
             width: 100%;
             height: 40px;
             cursor: pointer;
             appearance: none;
             box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
             transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .modern-select:focus {
             outline: none;
             border-color: #2c5282;
             box-shadow: 0 0 0 2px rgba(44, 82, 130, 0.2);
        }
        .modern-select-wrapper::after { /* Custom arrow */
            content: '\f078'; /* Font Awesome chevron-down */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #718096;
            pointer-events: none;
        }
        /* shadcn button primary */
        .modern-button-primary {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border: 1px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            background-color: #2c5282;
            color: white;
            border-color: #2c5282;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .modern-button-primary:hover {
             background-color: #2a4365;
             border-color: #2a4365;
        }
        /* shadcn button secondary */
        .modern-button-secondary {
             display: inline-flex;
             align-items: center;
             justify-content: center;
             border-radius: 6px;
             font-size: 0.875rem;
             font-weight: 500;
             padding: 0.5rem 1rem;
             border: 1px solid #cbd5e0;
             cursor: pointer;
             transition: all 0.2s ease;
             background-color: #ffffff;
             color: #2d3748;
             box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
         .modern-button-secondary:hover {
             background-color: #f7fafc;
             border-color: #a0aec0;
        }
        /* shadcn button ghost/subtle */
         .modern-button-ghost {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            background-color: transparent;
            color: #2c5282; /* Link color */
            border: 1px solid transparent;
         }
         .modern-button-ghost:hover {
              background-color: #ebf4ff; /* Light blue hover */
              color: #2a4365;
         }

        .modern-link {
            color: #2b6cb0;
            text-decoration: underline;
            font-weight: 500;
            cursor: pointer;
        }
        .modern-link:hover {
            color: #2c5282;
        }
        /* Code Editor (Monaco-like) */
        .code-editor-wrapper {
             border: 1px solid #cbd5e0;
             border-radius: 6px;
             overflow: hidden; /* Contain the editor */
             position: relative;
             background-color: #1e1e1e; /* Dark background */
        }
        .code-editor {
            min-height: 250px;
            max-height: 400px; /* Limit max height */
            color: #d4d4d4; /* Light text */
            padding: 1rem;
            font-family: 'Menlo', 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            overflow: auto;
            resize: vertical;
            white-space: pre; /* Preserve whitespace */
            outline: none;
        }
         /* Basic Syntax Highlighting Simulation */
        .code-editor .key { color: #9cdcfe; } /* Light blue for keys */
        .code-editor .string { color: #ce9178; } /* Orange for strings */
        .code-editor .number { color: #b5cea8; } /* Green for numbers */
        .code-editor .boolean { color: #569cd6; } /* Blue for booleans */
        .code-editor .null { color: #569cd6; } /* Blue for null */

        /* Results Box Styling */
        .result-box {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-top: 1rem;
            background-color: #ffffff;
            overflow: hidden; /* Clip inner content */
            box-shadow: 0 2px 4px rgba(0,0,0,0.04);
        }
        .result-header {
            padding: 0.75rem 1.25rem;
            background-color: #f7fafc; /* Light gray header */
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .result-status {
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px; /* Pill */
            font-size: 0.8rem;
        }
        .result-status-success {
            color: #0f5132; /* Dark green text */
            background-color: #d1e7dd; /* Light green background */
        }
        .result-status-fail {
             color: #842029; /* Dark red text */
             background-color: #f8d7da; /* Light red background */
        }
        .result-status-success .icon { color: #198754; margin-right: 0.4rem; } /* Green check */
        .result-status-fail .icon { color: #dc3545; margin-right: 0.4rem; } /* Red X */

        .result-section {
             padding: 1.25rem;
        }
        .result-section h4 {
             font-weight: 600;
             font-size: 0.9rem;
             color: #4a5568;
             margin-bottom: 0.5rem;
        }
        .result-section pre {
            background-color: #f8f9fa; /* Light gray code block */
            border: 1px solid #e2e8f0;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.85em;
            font-family: 'Menlo', 'Monaco', 'Consolas', monospace;
            margin-top: 0.25rem;
            max-height: 200px; /* Limit height */
            overflow: auto;
            color: #333;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .result-metrics {
            border-top: 1px solid #e2e8f0;
            padding: 1rem 1.25rem;
            background-color: #f7fafc;
            font-size: 0.85rem;
        }
        .result-metrics dt { /* Definition term (label) */
             font-weight: 500;
             color: #718096;
        }
         .result-metrics dd { /* Definition description (value) */
             color: #2d3748;
             font-weight: 500;
        }

    </style>
</head>
<body class="text-sm">

    <!-- Modern Header -->
     <header class="modern-header p-3 flex justify-between items-center shadow-sm">
        <div class="flex items-center space-x-4">
             <i class="fas fa-cloud text-xl text-blue-600"></i>
            <span class="font-semibold text-lg">Function Monitor</span>
        </div>
        <div class="flex items-center space-x-3">
            <i class="fas fa-bell text-gray-500 cursor-pointer hover:text-gray-800"></i>
            <span class="text-xs font-medium text-gray-600">user@example.com</span>
            <i class="fas fa-chevron-down text-xs text-gray-500 cursor-pointer"></i>
        </div>
    </header>

    <div class="flex h-[calc(100vh-61px)]">
        <!-- Modern Sidebar -->
         <aside class="modern-sidebar flex flex-col items-center space-y-6">
             <i class="fas fa-tachometer-alt fa-lg sidebar-icon cursor-pointer" title="Dashboard"></i>
            <i class="fas fa-bolt fa-lg sidebar-icon cursor-pointer text-blue-600" title="Functions"></i>
            <i class="fas fa-layer-group fa-lg sidebar-icon cursor-pointer" title="Layers"></i>
            <i class="fas fa-cogs fa-lg sidebar-icon cursor-pointer" title="Settings"></i>
            <div class="flex-grow"></div>
            <i class="fas fa-question-circle fa-lg sidebar-icon cursor-pointer" title="Help"></i>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-6 lg:p-8 overflow-auto">
             <!-- Breadcrumbs / Function Title -->
            <div class="mb-3 text-xs text-gray-500">
                <a href="#" class="hover:underline hover:text-blue-600">Functions</a> &gt; <span class="font-medium text-gray-700">my-example-function</span>
            </div>
            <h1 class="text-3xl font-semibold mb-6 text-gray-800">my-example-function</h1>

            <!-- Function Tabs -->
            <div class="flex border-b border-gray-300 mb-8">
                <a href="#" class="modern-tab">Code</a>
                <a href="1_observability_default.html" class="modern-tab">Observability</a>
                <a href="5_test_tab_enhanced.html" class="modern-tab active">Test</a>
                <a href="3_config_add_trigger.html" class="modern-tab">Configuration</a>
                <a href="#" class="modern-tab">Aliases</a>
                <a href="#" class="modern-tab">Versions</a>
            </div>

            <!-- Test Tab Content -->
            <div class="space-y-8">

                <!-- Test Event Configuration -->
                <div class="modern-card">
                    <div class="flex justify-between items-center mb-6 flex-wrap gap-3">
                        <h2 class="text-xl font-semibold text-gray-700">Test Event</h2>
                        <div class="flex space-x-2">
                           <button class="modern-button-secondary"><i class="fas fa-cog mr-2 opacity-70"></i>Configure test events</button>
                           <button class="modern-button-primary"><i class="fas fa-play mr-2"></i>Test</button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-5 mb-6">
                        <div>
                            <label class="modern-label" for="test-event-select">Saved test event</label>
                             <div class="modern-select-wrapper">
                                <select id="test-event-select" class="modern-select">
                                    <option>Select or create event...</option>
                                    <option selected>MySQSEvent_SuccessCase</option>
                                    <option>MySQSEvent_FailureCase</option>
                                    <option>DefaultEvent_Empty</option>
                                    <option>--- Create new event ---</option>
                                </select>
                            </div>
                        </div>
                         <div>
                            <label class="modern-label" for="test-template-select">Template (optional)</label>
                            <div class="modern-select-wrapper">
                                <select id="test-template-select" class="modern-select">
                                    <option>No template</option>
                                    <option selected>SQS</option>
                                    <option>API Gateway AWS Proxy</option>
                                    <option>S3 Put</option>
                                    <option>CloudWatch Logs</option>
                                    <option>SNS</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="modern-label" for="test-event-name">Event name</label>
                            <input type="text" id="test-event-name" value="MySQSEvent_SuccessCase" class="modern-input">
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="modern-label">Event JSON</label>
                        <div class="code-editor-wrapper">
                            <div class="code-editor" contenteditable="true">
<span class="punctuation">{</span>                             
  <span class="key">"Records"</span><span class="punctuation">:</span> <span class="punctuation">[</span>
    <span class="punctuation">{</span>
      <span class="key">"messageId"</span><span class="punctuation">:</span> <span class="string">"19dd0b57-b21e-4ac1-bd88-01bbb068cb78"</span><span class="punctuation">,</span>
      <span class="key">"receiptHandle"</span><span class="punctuation">:</span> <span class="string">"MessageReceiptHandle"</span><span class="punctuation">,</span>
      <span class="key">"body"</span><span class="punctuation">:</span> <span class="string">"{\"message\": \"Hello from SQS!\"}"</span><span class="punctuation">,</span>
      <span class="key">"attributes"</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="key">"ApproximateReceiveCount"</span><span class="punctuation">:</span> <span class="string">"1"</span><span class="punctuation">,</span>
        <span class="key">"SentTimestamp"</span><span class="punctuation">:</span> <span class="string">"1523232000000"</span><span class="punctuation">,</span>
        <span class="key">"SenderId"</span><span class="punctuation">:</span> <span class="string">"123456789012"</span><span class="punctuation">,</span>
        <span class="key">"ApproximateFirstReceiveTimestamp"</span><span class="punctuation">:</span> <span class="string">"1523232000001"</span>
      <span class="punctuation">}</span><span class="punctuation">,</span>
      <span class="key">"messageAttributes"</span><span class="punctuation">:</span> <span class="punctuation">{}</span><span class="punctuation">,</span>
      <span class="key">"md5OfBody"</span><span class="punctuation">:</span> <span class="string">"{{{md5_of_body}}}"</span><span class="punctuation">,</span>
      <span class="key">"eventSource"</span><span class="punctuation">:</span> <span class="string">"aws:sqs"</span><span class="punctuation">,</span>
      <span class="key">"eventSourceARN"</span><span class="punctuation">:</span> <span class="string">"arn:aws:sqs:us-east-1:123456789012:MyQueue"</span><span class="punctuation">,</span>
      <span class="key">"awsRegion"</span><span class="punctuation">:</span> <span class="string">"us-east-1"</span>
    <span class="punctuation">}</span>
  <span class="punctuation">]</span>
<span class="punctuation">}</span>
                            </div>
                        </div>
                    </div>

                     <div class="flex justify-end space-x-2 border-t border-gray-200 pt-4 mt-6">
                         <button class="modern-button-ghost"><i class="fas fa-save mr-2"></i>Save changes</button>
                         <button class="modern-button-ghost"><i class="fas fa-share-alt mr-2"></i>Share</button>
                     </div>
                </div>

                <!-- Execution Results Section -->
                <div class="modern-card">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">Execution Results</h2>
                    <!-- Success Example -->
                    <div class="result-box">
                         <div class="result-header">
                             <span class="result-status result-status-success"><i class="fas fa-check-circle icon"></i>Succeeded</span>
                             <span class="text-xs text-gray-500">Request ID: xyz-789</span>
                         </div>
                         <div class="result-section">
                             <h4>Response</h4>
                             <pre>{ 
  "statusCode": 200,
  "body": "{\"message\": \"Successfully processed SQS message!\"}"
}</pre>
                             <h4 class="mt-5">Function Logs <span class="text-xs font-normal text-gray-400">(Truncated)</span></h4>
                             <pre>
START RequestId: xyz-789 Version: $LATEST
INFO Processing event...
INFO Message body: {"message": "Hello from SQS!"}
END RequestId: xyz-789
REPORT RequestId: xyz-789 Duration: 150.12 ms Billed Duration: 151 ms Memory Size: 128 MB Max Memory Used: 60 MB Init Duration: 123.45 ms
                             </pre>
                            <p class="text-xs text-gray-500 mt-3">View full logs in <a href="1_observability_default.html" class="modern-link">Observability Tab</a> or <a href="#" class="modern-link">CloudWatch Logs</a>.</p>
                         </div>
                         <dl class="result-metrics grid grid-cols-3 gap-x-4 gap-y-2">
                             <div>
                                 <dt>Duration:</dt>
                                 <dd>150.12 ms</dd>
                             </div>
                             <div>
                                 <dt>Billed Duration:</dt>
                                 <dd>151 ms</dd>
                             </div>
                             <div>
                                 <dt>Max Memory Used:</dt>
                                 <dd>60 MB</dd>
                             </div>
                             <div>
                                 <dt>Init Duration:</dt>
                                 <dd>123.45 ms</dd>
                             </div>
                             <div>
                                 <dt>Memory Size:</dt>
                                 <dd>128 MB</dd>
                             </div>
                         </dl>
                    </div>

                    <!-- Failure Example (Optional - could be shown conditionally) -->
                     <!--
                     <div class="result-box mt-6">
                         <div class="result-header">
                             <span class="result-status result-status-fail"><i class="fas fa-times-circle icon"></i>Failed</span>
                             <span class="text-xs text-gray-500">Request ID: abc-123</span>
                         </div>
                          <div class="result-section">
                             <h4>Error</h4>
                             <pre>{
  "errorType": "Runtime.UnhandledPromiseRejection",
  "errorMessage": "Error: Configuration value missing: S3_BUCKET_NAME",
  "reason": {
    "errorType": "Error",
    "errorMessage": "Configuration value missing: S3_BUCKET_NAME",
    "stack": [
      "Error: Configuration value missing: S3_BUCKET_NAME",
      "    at ConfigLoader.getRequired (/var/task/configLoader.js:25:15)",
      "    at Runtime.exports.handler (/var/task/index.js:10:21)",
      "    at Runtime.handleOnceNonStreaming (/var/runtime/Runtime.js:74:25)"
    ]
  },
  "promise": {},
  "stack": [
    "Runtime.UnhandledPromiseRejection: Error: Configuration value missing: S3_BUCKET_NAME",
    "    at process.<anonymous> (/var/runtime/index.js:35:15)",
    "    at process.emit (events.js:400:28)",
    "    at processPromiseRejections (internal/process/promises.js:245:33)",
    "    at processTicksAndRejections (internal/process/task_queues.js:96:32)"
  ]
}</pre>
                             <h4 class="mt-5">Function Logs <span class="text-xs font-normal text-gray-400">(Truncated)</span></h4>
                             <pre>
START RequestId: abc-123 Version: $LATEST
ERROR Configuration value missing: S3_BUCKET_NAME
    at ConfigLoader.getRequired (/var/task/configLoader.js:25:15)
    at Runtime.exports.handler (/var/task/index.js:10:21)
    ...
END RequestId: abc-123
REPORT RequestId: abc-123 Duration: 600.80 ms Billed Duration: 601 ms Memory Size: 128 MB Max Memory Used: 49 MB
                             </pre>
                         </div>
                         <dl class="result-metrics grid grid-cols-3 gap-x-4 gap-y-2">
                              <div><dt>Duration:</dt><dd>600.80 ms</dd></div>
                              <div><dt>Billed Duration:</dt><dd>601 ms</dd></div>
                              <div><dt>Max Memory Used:</dt><dd>49 MB</dd></div>
                         </dl>
                    </div>
                    -->
                </div>
            </div>

        </main>
    </div>

</body>
</html> 