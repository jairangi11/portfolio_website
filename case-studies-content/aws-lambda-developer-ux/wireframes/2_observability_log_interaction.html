<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wireframe - Lambda Observability (Log Interaction)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Mimic AWS Console Font */
        body {
            font-family: 'Amazon Ember', 'Helvetica Neue', sans-serif;
            background-color: #f8f9fa;
            color: #16191f;
        }
        .aws-header {
            background-color: #232f3e;
            color: white;
        }
        .aws-sidebar {
            background-color: #eaeded;
            border-right: 1px solid #dee2e6;
        }
        .aws-content-area {
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .aws-tab {
            border-bottom: 3px solid transparent;
            padding: 10px 15px;
            cursor: pointer;
            color: #5f6b7a;
            transition: all 0.2s ease-in-out;
            text-decoration: none;
            display: inline-block;
        }
        .aws-tab:hover {
             background-color: #f1f3f3;
             color: #16191f;
        }
        .aws-tab.active {
            border-bottom-color: #ec7211;
            color: #0d1a26;
            font-weight: 600;
            background-color: transparent;
        }
        .aws-card {
            border: 1px solid #e7e9ec;
            border-radius: 4px;
            background-color: #ffffff;
            padding: 1rem 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.03);
        }
        .aws-placeholder { /* Keeping for sidebar */
            background-color: #e9ecef;
            border: 1px dashed #ced4da;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            min-height: 100px;
            text-align: center;
        }
        .chart-container {
            position: relative;
            height: 150px;
            width: 100%;
        }
        .aws-button { /* Base button style */
             padding: 6px 12px;
             border-radius: 3px;
             font-size: 0.9em;
             border: 1px solid #adb5bd;
             cursor: pointer;
             transition: background-color 0.2s ease;
             background-color: #ffffff;
             color: #16191f;
        }
        .aws-button:hover {
             background-color: #f8f9fa;
        }
         .aws-button-filter {
             background-color: #e9ecef; /* Different background for active filter */
             border-color: #adb5bd;
             color: #16191f;
         }
         .aws-button-filter:hover {
              background-color: #dee2e6;
         }
        .aws-input {
             border: 1px solid #adb5bd;
             border-radius: 3px;
             padding: 6px 10px;
             font-size: 0.9em;
        }
        .log-viewer {
             background-color: #f8f9fa;
             border: 1px solid #dee2e6;
             border-radius: 3px;
             padding: 0.5rem;
             height: 300px;
             overflow-y: scroll;
             font-family: monospace;
             font-size: 0.85em;
             color: #343a40;
        }
        .log-line {
            white-space: pre;
            padding: 1px 5px;
            display: flex; /* Use flex for alignment */
            align-items: baseline;
        }
        .log-line:hover {
             background-color: #e9ecef;
        }
        .log-line.highlight {
            background-color: #fff9db; /* Softer yellow highlight */
            border-left: 3px solid #ffc107;
            padding-left: 2px;
        }
        .log-timestamp {
            color: #6c757d;
            margin-right: 10px;
            min-width: 90px; /* Ensure alignment */
            display: inline-block;
        }
         .log-level-error {
             color: #dc3545; /* Bootstrap red */
             font-weight: bold;
         }
         .log-level-info {
              color: #17a2b8; /* Bootstrap cyan */
         }
         .log-content {
             flex-grow: 1;
         }
          .log-placeholder { /* Specific placeholder for traces */
             background-color: #f8f9fa;
             border: 1px dashed #dee2e6;
             color: #6c757d;
             padding: 2rem;
             text-align: center;
             border-radius: 3px;
             min-height: 150px;
             display: flex;
             align-items: center;
             justify-content: center;
        }

    </style>
</head>
<body class="text-sm">

    <!-- Simplified AWS Header Placeholder -->
    <header class="aws-header p-2 flex justify-between items-center shadow-md">
        <span class="font-semibold text-base">AWS Lambda</span>
        <span class="text-xs">user@example.com | N. Virginia â–¼</span>
    </header>

    <div class="flex h-[calc(100vh-48px)]">
        <!-- Simplified AWS Sidebar Placeholder -->
        <aside class="aws-sidebar w-16 p-2 pt-4 space-y-4">
            <div class="aws-placeholder h-8 w-8 mx-auto rounded"></div>
            <div class="aws-placeholder h-8 w-8 mx-auto rounded"></div>
            <div class="aws-placeholder h-8 w-8 mx-auto rounded"></div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-6 overflow-auto">
            <!-- Breadcrumbs / Function Title -->
             <div class="mb-2 text-xs text-gray-600">
                <a href="#" class="hover:underline">Lambda</a> > <a href="#" class="hover:underline">Functions</a> > my-example-function
            </div>
            <h1 class="text-2xl font-semibold mb-5">my-example-function</h1>

            <!-- Function Tabs -->
            <div class="flex border-b border-gray-300 mb-6">
                <a href="#" class="aws-tab">Code</a>
                <a href="1_observability_default.html" class="aws-tab active">Observability</a>
                <a href="5_test_tab_enhanced.html" class="aws-tab">Test</a>
                <a href="3_config_add_trigger.html" class="aws-tab">Configuration</a>
                <a href="#" class="aws-tab">Aliases</a>
                <a href="#" class="aws-tab">Versions</a>
            </div>

            <!-- Observability Tab Content -->
            <div class="space-y-6">

                <!-- Filters/Time Range Selector -->
                <div class="aws-card flex justify-between items-center p-3">
                    <div class="flex space-x-3 items-center">
                         <!-- Show active filters -->
                         <button class="aws-button aws-button-filter">Filter: Invocation ID: abc-123 &times;</button>
                         <button class="aws-button">Add Filter</button>
                        <input type="text" placeholder="Search Logs..." value="ERROR" class="aws-input">
                    </div>
                    <div class="flex items-center space-x-3">
                        <span class="text-gray-700">Time Range:</span>
                        <select class="aws-input">
                            <option>Last 15 minutes</option>
                            <option selected>Last 1 hour</option>
                            <option>Last 3 hours</option>
                            <option>Custom</option>
                        </select>
                        <button class="aws-button">Refresh</button>
                        <button class="aws-button">Pause</button>
                    </div>
                </div>

                <!-- Metrics Section -->
                <div class="aws-card">
                    <h2 class="font-semibold text-lg mb-4">Key Metrics</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                         <div>
                            <h3 class="text-center font-medium text-sm mb-2">Invocations</h3>
                            <div class="chart-container"><canvas id="invocationsChart"></canvas></div>
                        </div>
                        <div>
                            <h3 class="text-center font-medium text-sm mb-2">Errors</h3>
                            <div class="chart-container"><canvas id="errorsChart"></canvas></div>
                        </div>
                        <div>
                             <h3 class="text-center font-medium text-sm mb-2">Duration (Avg)</h3>
                            <div class="chart-container"><canvas id="durationChart"></canvas></div>
                        </div>
                        <div>
                             <h3 class="text-center font-medium text-sm mb-2">Throttles</h3>
                            <div class="chart-container"><canvas id="throttlesChart"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- Logs Section - Filtered/Highlighted -->
                <div class="aws-card">
                    <h2 class="font-semibold text-lg mb-3">Logs (Filtered: Invocation ID abc-123, Search: "ERROR")</h2>
                    <div class="log-viewer">
                        <div class="log-line"><span class="log-timestamp">10:35:01.123</span> <span class="log-content">START RequestId: abc-123 Version: $LATEST</span></div>
                        <div class="log-line"><span class="log-timestamp">10:35:01.456</span> <span class="log-level-info log-content">INFO Processing event...</span></div>
                        <div class="log-line highlight"><span class="log-timestamp">10:35:01.789</span> <span class="log-level-error log-content">ERROR NullPointerException at line 42</span></div>
                        <div class="log-line highlight"><span class="log-timestamp">10:35:01.790</span> <span class="log-content">  at com.example.MyHandler.handleRequest(MyHandler.java:42)</span></div>
                        <div class="log-line highlight"><span class="log-timestamp">10:35:01.790</span> <span class="log-content">  ...</span></div>
                        <div class="log-line"><span class="log-timestamp">10:35:01.900</span> <span class="log-content">END RequestId: abc-123</span></div>
                        <div class="log-line"><span class="log-timestamp">10:35:01.901</span> <span class="log-content">REPORT RequestId: abc-123 Duration: 778 ms Billed Duration: 778 ms Memory Size: 128 MB Max Memory Used: 50 MB Init Duration: 123 ms</span></div>
                        <!-- Add more sample log lines -->
                    </div>
                </div>

                <!-- Traces Section -->
                 <div class="aws-card">
                    <h2 class="font-semibold text-lg mb-3">Traces (X-Ray Enabled)</h2>
                    <div class="log-placeholder">
                         Trace summaries/links...
                    </div>
                </div>

            </div>

        </main>
    </div>
<script>
    // Sample Data (Same as default view for consistency)
    const labels = ['-1h', '-45m', '-30m', '-15m', 'Now'];
    const randomData = () => labels.map(() => Math.floor(Math.random() * 100));
    const randomDurationData = () => labels.map(() => Math.floor(Math.random() * 500) + 50);

    // Chart Configuration Defaults
    const chartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: { legend: { display: false } },
        scales: {
            y: { beginAtZero: true, ticks: { font: { size: 10 } } },
            x: { ticks: { font: { size: 10 } } }
        },
        elements: { line: { tension: 0.3 } }
    };

    // Init Charts
    new Chart(document.getElementById('invocationsChart'), {
        type: 'line',
        data: { labels: labels, datasets: [{ label: 'Invocations', data: randomData(), borderColor: '#2e72b8', backgroundColor: 'rgba(46, 114, 184, 0.1)', fill: true }] },
        options: chartOptions
    });
    new Chart(document.getElementById('errorsChart'), {
        type: 'line',
        data: { labels: labels, datasets: [{ label: 'Errors', data: randomData().map(d => Math.floor(d/10)), borderColor: '#d13212', backgroundColor: 'rgba(209, 50, 18, 0.1)', fill: true }] },
        options: chartOptions
    });
     new Chart(document.getElementById('durationChart'), {
        type: 'line',
        data: { labels: labels, datasets: [{ label: 'Duration (ms)', data: randomDurationData(), borderColor: '#1d8102', backgroundColor: 'rgba(29, 129, 2, 0.1)', fill: true }] },
        options: chartOptions
    });
    new Chart(document.getElementById('throttlesChart'), {
        type: 'line',
        data: { labels: labels, datasets: [{ label: 'Throttles', data: randomData().map(d => Math.floor(d/20)), borderColor: '#ff8c00', backgroundColor: 'rgba(255, 140, 0, 0.1)', fill: true }] },
        options: chartOptions
    });
</script>
</body>
</html> 